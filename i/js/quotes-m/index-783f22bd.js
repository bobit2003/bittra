import{c as nt,d as B,a as V,i as it,b as F,e as q,m as at,f as X,g as ot,u as ct,s as K,t as E,h as lt,o as ut,j as J,k as O,l as u,n as dt,p as w,S as Q,q as Z,r as ht,v as gt,M as ft,F as Y,w as pt,y as mt,x as vt,z as H,C as yt,X as wt,A as bt,B as xt,T as Et,I as $t,E as _t,D as Mt}from"./vendor-0bfe366d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();if(!window.__QUOTE_MARQUEE)throw new Error("Need config, window.__QUOTE_MARQUEE");const S=window.__QUOTE_MARQUEE,Ct={en:{all:"All instruments",forex:"Forex",shares:"Shares",metals:"Metals",crypto:"Crypto",gas:"Metals and Gas",indices:"Indices",futures:"Futures"},ru:{all:"Все инструменты",forex:"Валютные пары",shares:"Акции",metals:"Металлы",crypto:"Криптовалюты",gas:"Металлы и газ",indices:"Индексы",futures:"Фьючерсы"},ar:{all:"جميع الأدوات",forex:"فوركس",shares:"الأسهم",metals:"المعادن",crypto:"العملات المشفرة",gas:"المعادن والغاز",indices:"المؤشرات",futures:"العقود الآجلة"},pk:{all:"تمام آلات",forex:"فاریکس",shares:"حصص",metals:"دھاتیں",crypto:"کرپٹو",gas:"دھاتیں اور گیس",indices:"اشاریہ",futures:"مستقبلی معاہدے"}},St=nt(Ct,S.lang??"en");async function At(e,t){const r=new Request(e,t),s=await fetch(r);if(!s.ok)throw new Error(`${s.status} ${s.statusText}`);return s.json().catch(()=>({}))}async function j(e,t){const r={method:"get",...t};return await At(e,r)}const Pt=(e,t)=>new Intl.NumberFormat("en",{...t,style:"percent",minimumFractionDigits:2,useGrouping:!1}).format(e),G=(e,t=2,r)=>new Intl.NumberFormat("en",{minimumFractionDigits:t,useGrouping:!1,...r}).format(e),kt=()=>{const e=new Map;return{query:(s,i)=>{const a=s.join("_");return e.has(a)||e.set(a,i()),e.get(a)},clear:()=>e.clear()}};function tt(e){const t=new URLSearchParams;return Object.entries(e).forEach(([r,s])=>{Array.isArray(s)?s.forEach(i=>t.append(r,i.toString())):t.append(r,s.toString())}),t.toString()}const D=({endPoint:e,params:t,baseUrl:r=S.tradeUrl})=>{const s=new URL(e,r);if(t){const i=tt(t);s.search=i.toString()}return s.toString()},Lt=async(e,t="4")=>{const r=D({endPoint:"public/quotes/extraData",params:{serverType:t,symbol:e}});return await j(r)},Ft=async(e=4)=>{const t=D({endPoint:"public/quotes/list",params:{serverType:e}});return await j(t)},Ot=async()=>{const e=D({endPoint:"public/quotes/categories",params:{type:"instaforex"}}),t=await j(e),{metals:r,...s}=t;return s.gas=[...r,...s.gas],s},jt=async e=>{const t=B().endOf("day").unix(),r=B().subtract(1,"M").startOf("day").unix(),s=new URL("datafeed/history",S.chartUrl);return s.search=tt({symbol:e,from:r,to:t}),await j(s.toString())},qt=kt(),Qt=async e=>qt.query(["ohlc",e],async()=>{const{c:t}=await jt(e),r=Math.min(...t),s=Math.max(...t);return{points:t.join(","),min:r,max:s}}),Dt=()=>{const[e,t]=V({connected:!1,category:"forex",count:20}),r=it(S.socketUrl,{transports:["websocket"],autoConnect:!0});r.on("connect",()=>{t("connected",!0)}),r.on("disconnect",()=>{t("connected",!1)}),r.on("quotes",c=>{if(c.msg){const{msg:n}=c;m().forEach(o=>{o.symbol===n.symbol&&o.setTick(n)})}});const s=(c,n="standard",o=4)=>{r.emit("subscribe",c,n,o)},i=(c,n="standard",o=4)=>{r.emit("unsubscribe",c,n,o)},[a]=F(async()=>(await Ft()).filter(o=>o.tradeEnabled===2&&!o.symbol.includes(".futu")&&!o.symbol.includes(".fx")),{initialValue:[]}),[d]=F(Ot,{initialValue:{}}),g=q(()=>["all",...Object.keys(d())]),f=q(()=>{const c=d()[e.category]??[];return a().filter(o=>e.category==="all"?!0:c.includes(o.typeName)).sort((o,l)=>l.popularity-o.popularity).splice(0,e.count)}),p=q(()=>f().map(c=>c.symbol)),[v]=F(()=>{const c=f();return c.length===0?null:c},async c=>{const n=c.map(({symbol:l})=>l);return await Lt(n)},{initialValue:[]}),m=at(()=>v(),c=>{const[n,o]=V(c);return{get change24h(){return G(n.bid-n.open_price,n.digits)},get change24hPercent(){return Pt(+this.change24h/n.open_price,{signDisplay:"always"})},get symbol(){return n.symbol},get bid(){return G(n.bid,n.digits)},get direction(){const l=+this.change24h;return l>0?"up":l<0?"down":"stop"},setTick(l){o(l)}}});return X(c=>{const n=p();return c.length>0&&i(c),n.length>0&&s(n),n},[]),{state:e,setState:t,types:g,quotes:m}},et=ot(null),{Provider:Nt}=et,rt=()=>{const e=ct(et);if(e===null)throw new Error("useAppStore use in AppStoreProvider");return e},It=E('<svg aria-hidden="true" class="inline w-8 h-8 mr-2 text-gray-200 animate-spin fill-positive" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.59c0 27.615-22.386 50.001-50 50.001s-50-22.386-50-50 22.386-50 50-50 50 22.386 50 50zm-90.919 0c0 22.6 18.32 40.92 40.919 40.92 22.599 0 40.919-18.32 40.919-40.92 0-22.598-18.32-40.918-40.919-40.918-22.599 0-40.919 18.32-40.919 40.919z" fill="currentColor"></path><path d="M93.968 39.04c2.425-.636 3.894-3.128 3.04-5.486A50 50 0 0041.735 1.279c-2.474.414-3.922 2.919-3.285 5.344.637 2.426 3.12 3.849 5.6 3.484a40.916 40.916 0 0144.131 25.769c.902 2.34 3.361 3.802 5.787 3.165z" fill="currentFill"></path></svg>',6),Rt=e=>(()=>{const t=It.cloneNode(!0);return K(t,e,!0,!0),t})(),Tt={options:{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:.1,width:32},draw(e){for(var t=this.values(),r=Math.max.apply(Math,e.max===void 0?t:t.concat(e.max)),s=Math.min.apply(Math,e.min===void 0?t:t.concat(e.min)),i=this.prepare(e.width,e.height),a=i.getBoundingClientRect(),d=a.width,g=a.height,f=r-s,p=e.padding,v=this.fill(),m=this.x=x=>x*d/t.length,c=this.y=x=>g-(f?(x-s)/f*g:1),n=0;n<t.length;n++){var o=m(n+p),l=m(n+1-p)-o,h=t[n],b=c(h),_=b,$=b,y;f?h<0?_=c(Math.min(r,0)):$=c(Math.max(s,0)):y=1,y=$-_,y===0&&(y=1,r>0&&f&&_--),i.appendChild(this.svgElement("rect",{fill:v.call(this,h,n,t),x:o,y:_,width:l,height:y}))}}},Ut={options:{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},draw(e){var t=this.values();t.length===1&&t.push(t[0]);for(var r=Math.max.apply(Math,e.max===void 0?t:t.concat(e.max)),s=Math.min.apply(Math,e.min===void 0?t:t.concat(e.min)),i=this.prepare(e.width,e.height),a=i.getBoundingClientRect(),d=e.strokeWidth,g=a.width,f=a.height-d,p=r-s,v=this.x=l=>l*(g/(t.length-1)),m=this.y=l=>{var h=f;return p&&(h-=(l-s)/p*f),h+d/2},c=m(Math.max(s,0)),n=[0,c],o=0;o<t.length;o++)n.push(v(o),m(t[o]));n.push(g,c),e.fill&&i.appendChild(this.svgElement("polygon",{fill:e.fill,points:n.join(" ")})),d&&i.appendChild(this.svgElement("polyline",{fill:"none",points:n.slice(2,n.length-2).join(" "),stroke:e.stroke,"stroke-width":d,"stroke-linecap":"square"}))}},st={options:{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},draw(e){if(!e.delimiter){var t=this.raw.match(/[^0-9\.]/);e.delimiter=t?t[0]:","}var r=this.values().map(L=>L>0?L:0);if(e.delimiter==="/"){var s=r[0],i=r[1];r=[s,Math.max(0,i-s)]}for(var a=0,d=r.length,g=0;a<d;a++)g+=r[a];g||(d=2,g=1,r=[0,1]);var f=e.radius*2,p=this.prepare(e.width||f,e.height||f),v=p.getBoundingClientRect(),m=v.width,c=v.height,n=m/2,o=c/2,l=Math.min(n,o),h=e.innerRadius;this.type==="donut"&&!h&&(h=l*.5);var b=Math.PI,_=this.fill(),$=this.scale=(L,U)=>{var z=L/g*b*2-b/2;return[U*Math.cos(z)+n,U*Math.sin(z)+o]},y=0;for(a=0;a<d;a++){var x=r[a],P=x/g,C;if(P!==0){if(P===1)if(h){var N=n-.01,I=o-l,R=o-h;C=this.svgElement("path",{d:["M",n,I,"A",l,l,0,1,1,N,I,"L",N,R,"A",h,h,0,1,0,n,R].join(" ")})}else C=this.svgElement("circle",{cx:n,cy:o,r:l});else{var T=y+x,k=["M"].concat($(y,l),"A",l,l,0,P>.5?1:0,1,$(T,l),"L");h?k=k.concat($(T,h),"A",h,h,0,P>.5?1:0,0,$(y,h)):k.push(n,o),y+=x,C=this.svgElement("path",{d:k.join(" ")})}C.setAttribute("fill",_.call(this,x,a,r)),p.appendChild(C)}}}},W=(e,t)=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.entries(t).forEach(([s,i])=>r.setAttribute(s,i)),r};let A=class M{static defaults={};static graphers={};$el;type;options;raw;$svg;constructor(t,r,s,i){this.$el=t,this.type=r,this.raw=s,this.options=Object.assign({},M.defaults[this.type],i)}static register(t,r){M.defaults[t]=r.options,M.graphers[t]=r.draw}svgElement=(...t)=>W(...t);prepare=(t,r)=>(this.$svg||(this.$el.style.display="none",this.$svg=W("svg",{class:"peity"}),this.$el.parentNode?.insertBefore(this.$svg,this.$el)),this.$svg.innerHTML="",this.$svg.setAttribute("width",t.toString()),this.$svg.setAttribute("height",r.toString()),this.$svg);fill=()=>{const t=this.options.fill;return typeof t=="function"?t:function(r,s){return t[s%t.length]}};setData=t=>{this.raw=t};setOptions=t=>{this.options=Object.assign({},M.defaults[this.type],t)};draw=()=>{M.graphers[this.type].call(this,this.options)};values=()=>this.raw.split(this.options.delimiter).map(t=>parseFloat(t))};A.register("bar",Tt);A.register("donut",st);A.register("line",Ut);A.register("pie",st);const zt=E("<div></div>",2),Bt=e=>{let t,r;const[s]=lt(e,["type","data","options"]);return ut(()=>{t=new A(r,s.type,s.data,s.options),t.draw()}),X(()=>{t.setData(s.data),s.options&&t.setOptions(s.options),t.draw()}),(()=>{const i=zt.cloneNode(!0);return J(a=>r=a,i),i})()},Vt={up:{fill:["rgba(19, 129, 65, 0.1)"],stroke:"#138141"},down:{fill:["rgba(255, 95, 85, 0.1)"],stroke:"#a00e06"},stop:{fill:["rgba(30, 123, 226, 0.1)"],stroke:"rgba(30, 123, 226, 1)"}},Ht=e=>{O("stop");const[t]=F(()=>Qt(e.symbol),{initialValue:{points:"",min:0,max:0}});return u(Bt,{get options(){return{min:t().min,max:t().max,height:"100%",width:"100%",...Vt[e.direction]}},type:"line",get data(){return t().points}})},Gt=E('<a class="p-2 grid grid-cols-2 grid-rows-3 bg-white gap-x-2 hover:shadow-[inset_0_0_0px_1px] hover:shadow-[#2EA54D] no-underline" target="_blank"><div class="text-sm col-span-2"><span class="font-bold text-black no-underline"></span></div><div class="text-xs col-start-1 row-start-2 leading-none justify-start flex items-end"><span class="tabular-nums"></span></div><div class="text-xs col-start-1 row-start-3 leading-none justify-start flex items-end"><span class="tabular-nums"></span></div><div class="row-span-2 relative"><div class="quote-mini-chart absolute inset-0"></div></div></a>',18),Wt=e=>{const[t,r]=O(!1),[s]=dt();return(()=>{const i=Gt.cloneNode(!0),a=i.firstChild,d=a.firstChild,g=a.nextSibling,f=g.firstChild,p=g.nextSibling,v=p.firstChild,m=p.nextSibling,c=m.firstChild;return J(s,i,()=>n=>{r(o=>o||n.isIntersecting)}),w(d,()=>e.symbol),w(f,()=>e.bid),w(v,()=>e.change24hPercent),w(c,u(Z,{get when(){return t()},get children(){return u(Q,{get children(){return u(Ht,{get symbol(){return e.symbol},get direction(){return e.direction}})}})}})),ht(n=>{const o=S.specUrl(e.symbol),l=e.direction==="up",h=e.direction==="down",b=e.direction==="stop";return o!==n._v$&&gt(i,"href",n._v$=o),l!==n._v$2&&v.classList.toggle("text-positive",n._v$2=l),h!==n._v$3&&v.classList.toggle("text-negative",n._v$3=h),b!==n._v$4&&v.classList.toggle("text-stop",n._v$4=b),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i})()},Xt=E('<div class="grid gap-[1px] bg-[#EEEEEE] grid-flow-col auto-cols-[140px] box-border"></div>',2),Kt=()=>{const{quotes:e}=rt();return u(Z,{get when(){return e()},keyed:!0,children:t=>u(ft,{get speed(){return t.length>8?20:0},delay:2,get children(){const r=Xt.cloneNode(!0);return w(r,u(Y,{each:t,children:s=>u(Wt,{get symbol(){return s.symbol},get direction(){return s.direction},get bid(){return s.bid},get change24hPercent(){return s.change24hPercent}})})),r}})})},Jt=E('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_323_1922)"><circle cx="20" cy="20" r="19.5" stroke="currentColor"></circle><path d="M12.125 14.938h.08a2.24 2.24 0 004.34 0h11.33a.562.562 0 100-1.126h-11.33a2.24 2.24 0 00-4.34 0h-.08a.562.562 0 100 1.126zm2.25-1.688a1.125 1.125 0 110 2.25 1.125 1.125 0 010-2.25zm13.5 6.188h-.08a2.24 2.24 0 00-4.34 0h-11.33a.562.562 0 100 1.125h11.33a2.24 2.24 0 004.34 0h.08a.562.562 0 100-1.125zm-2.25 1.687a1.125 1.125 0 110-2.25 1.125 1.125 0 010 2.25zm2.25 3.938H22.17a2.24 2.24 0 00-4.34 0h-5.705a.562.562 0 100 1.125h5.705a2.24 2.24 0 004.34 0h5.705a.562.562 0 100-1.125zM20 26.75a1.125 1.125 0 110-2.25 1.125 1.125 0 010 2.25z" fill="#242424"></path></g><defs><clipPath id="clip0_323_1922"><path fill="#fff" d="M0 0H40V40H0z"></path></clipPath></defs></svg>',14),Zt=e=>(()=>{const t=Jt.cloneNode(!0);return K(t,e,!0,!0),t})(),Yt=E('<div class="w-full flex items-center justify-start"></div>',2);function te(){const[e]=pt(),{types:t,state:r,setState:s}=rt(),[i,a]=O(),[d,g]=O();return mt(i,d,{placement:"auto",modifiers:[{name:"offset",options:{offset:[0,20]}},{name:"preventOverflow",options:{}}]}),(()=>{const f=Yt.cloneNode(!0);return w(f,u(Et,{defaultOpen:!1,class:"relative",children:({isOpen:p,setState:v})=>[u(vt,{as:"div",ref:a,get children(){return u(Zt,{get class(){return H("cursor-pointer hover:text-[#2EA54D]",{"text-[#2EA54D]":p(),"text-[#EEEEEE]":!p()})},"aria-hidden":"true"})}}),u(yt,{get show(){return p()},enter:"transition duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",get children(){return u(wt,{ref:g,unmount:!1,class:"absolute overflow-hidden quote-popover z-10 w-auto py-2 transform -translate-x-1/2",get children(){return u(bt,{class:"relative grid grid-flow-row",get children(){return u(Y,{get each(){return t()},children:m=>u(xt,{as:"button",onClick:()=>{s("category",m),v(!1)},get class(){return H("flex items-center justify-start font-bold text-[12px] whitespace-nowrap px-3 py-2 border-none focus:ring-1 transition duration-150 ease-in-out  outline-none focus:outline-none focus-visible:ring focus-visible:ring-[#CB0D00] focus-visible:ring-opacity-50",{"text-[#242424] bg-transparent cursor-pointer hover:bg-[#CB0D00] hover:text-white":r.category!==m,"bg-[#CB0D00] text-white cursor-default":r.category===m})},get children(){return e(m)}})})}})}})}})]})),f})()}const ee=E('<div class="flex items-center justify-center"></div>',2),re=E('<div class="grid grid-cols-[1fr_70px] grid-rows-[76px] border border-solid border-[#EEEEEE]"><div class="flex justify-start items-center bg-[#F8F8F8] p-4 relative"></div></div>',4),se=()=>(()=>{const e=ee.cloneNode(!0);return w(e,u(Rt,{})),e})(),ne=()=>(()=>{const e=re.cloneNode(!0),t=e.firstChild;return w(e,u(Q,{get fallback(){return u(se,{})},get children(){return u(Kt,{})}}),t),w(t,u(te,{})),e})(),ie=()=>u(_t,{fallback:(e,t)=>null,get children(){return u($t.Provider,{value:St,get children(){return u(Nt,{get value(){return Dt()},get children(){return u(Q,{get children(){return u(ne,{})}})}})}})}}),ae=document.getElementById("quote-m");Mt(()=>u(ie,{}),ae);